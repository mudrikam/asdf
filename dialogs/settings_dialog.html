<!doctype html>
<!-- Tabbed settings modal (loaded dynamically) -->
<div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="settingsModalLabel">Settings</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-12">
						<!-- Nav tabs -->
						<ul class="nav nav-tabs" id="settingsTabs" role="tablist">
							<li class="nav-item" role="presentation">
								<button class="nav-link active" id="tab-apikeys" data-bs-toggle="tab" data-bs-target="#panel-apikeys" type="button" role="tab" aria-controls="panel-apikeys" aria-selected="true">API Keys</button>
							</li>
							<li class="nav-item" role="presentation">
								<button class="nav-link" id="tab-to-be-added" data-bs-toggle="tab" data-bs-target="#panel-to-be-added" type="button" role="tab" aria-controls="panel-to-be-added" aria-selected="false">To be added</button>
							</li>
						</ul>

						<div class="tab-content p-3 border border-top-0" id="settingsTabsContent">
							<div class="tab-pane fade show active" id="panel-apikeys" role="tabpanel" aria-labelledby="tab-apikeys">
								<p class="mb-2">Manage API keys used by the application. Use the fields below to add a key and select the target model.</p>
								<form id="form-apikeys">
									<div class="mb-3">
										<label for="apikey-name" class="form-label">Name</label>
										<input type="text" class="form-control" id="apikey-name" placeholder="key name">
									</div>

									<div class="mb-3">
										<label for="apikey-input" class="form-label">API Key</label>
										<input type="text" class="form-control" id="apikey-input" placeholder="api key">
									</div>

									<div class="mb-3">
										<label for="model-select" class="form-label">Model</label>
										<select id="model-select" class="form-select">
											<option value="" selected disabled>Select a model</option>
											<optgroup label="gemini">
												<option value="gemini-2.5-flash">gemini-2.5-flash</option>
												<option value="gemini-2.5-flash-lite">gemini-2.5-flash-lite</option>
												<option value="gemini-2.5-pro">gemini-2.5-pro</option>
												<option value="gemini-2.0-flash">gemini-2.0-flash</option>
												<option value="gemini-2.0-flash-lite">gemini-2.0-flash-lite</option>
											</optgroup>
											<optgroup label="openai">
												<option value="gpt-4.1">gpt-4.1</option>
												<option value="gpt-4.1-mini">gpt-4.1-mini</option>
												<option value="gpt-4.1-nano">gpt-4.1-nano</option>
												<option value="gpt-5">gpt-5</option>
												<option value="gpt-5-mini">gpt-5-mini</option>
												<option value="gpt-5-nano">gpt-5-nano</option>
											</optgroup>
										</select>
									</div>

									<div class="mb-3">
										<button class="btn btn-primary" type="button" id="add-apikey-btn">Add</button>
										<button class="btn btn-secondary ms-2" type="button" id="test-apikey-btn">Test</button>
										<div id="test-result" class="mt-2"></div>
									</div>

									<div class="mb-3">
										<div class="table-responsive">
											<table class="table table-sm table-striped" id="apikeys-table">
												<thead>
													<tr>
															<th style="width:40px"></th>
														<th>Name</th>
														<th>API Key</th>
														<th>Model</th>
														<th class="text-end">Actions</th>
													</tr>
												</thead>
												<tbody id="apikeys-table-body">
													<!-- rows inserted dynamically -->
												</tbody>
											</table>
										</div>
									</div>
								</form>
							</div>

							<div class="tab-pane fade" id="panel-to-be-added" role="tabpanel" aria-labelledby="tab-to-be-added">
								<p class="mb-2">Planned settings and integrations will be listed here.</p>
								<div class="alert alert-secondary" role="alert">
									Content coming soon. You can add more sections later (notifications, integrations, privacy, etc.).
								</div>
							</div>
						</div>
					</div>

								<!-- Delete confirmation modal -->
								<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
									<div class="modal-dialog modal-sm">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="confirmDeleteLabel">Confirm delete</h5>
												<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
											</div>
											<div class="modal-body">
												<p class="mb-0">Are you sure you want to delete this API key?</p>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
												<button type="button" class="btn btn-danger btn-sm" id="confirm-delete-btn">Delete</button>
											</div>
										</div>
									</div>
								</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" id="save-settings-btn" disabled>Save</button>
			</div>
		</div>
	</div>
</div>

